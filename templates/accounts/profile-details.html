{% extends 'common/base.html' %}
{% load static %}
{% block content %}

<section class="bg-pink-50 flex-grow flex items-center justify-center py-16">

    <div class="bg-white rounded-2xl shadow-xl w-full max-w-6xl p-10 grid md:grid-cols-3 gap-6">
        <!-- Left Column -->
        <section class="col-span-1 relative text-center space-y-4 border-2 border-pink-300 rounded-2xl p-6 mb-2">
            {% if not profile.user.is_active %}
                <p class="inline-block bg-red-100 text-red-800 text-sm font-semibold px-3 py-1 rounded-full border border-red-300 shadow-sm">
                    This profile is no longer active
                </p>
            {% endif %}

            <!-- Edit Button -->
            {% if request.user == profile.user %}
                <div class="absolute top-4 right-4 flex items-center gap-4 bg-white  text-white text-xs px-3 py-1 rounded-full shadow-md">
                    <a href="{% url 'profile-edit' profile.pk %}">
                        <img src="{% static 'common/edit.png' %}" alt="Edit">
                    </a>
                    <a href="{% url 'profile-delete' profile.pk %}">
                        <img src="{% static 'common/delete.png' %}" class="w-4 h-4">
                    </a>
                </div>
            {% endif %}

            {% if profile.profile_pic.url %}
                <img src="{{ profile.profile_pic.url }}" class="w-40 h-40 rounded-full mx-auto">
            {% else %}
                <img src="https://i.pinimg.com/474x/9d/86/8e/9d868edb99fa442461138e2f9a1e0be1.jpg" class="w-32 h-32 rounded-full mx-auto">
            {% endif %}

            <h2 class="text-xl font-bold text-pink-600"> {{ profile.user.username }}</h2>

            {% if profile.full_name %}
            	<p class="text-sm text-pink-600"> {{ profile.full_name }} </p>
            {% endif %}

            {% if profile.user.is_active %}
            	 <p class="text-sm text-pink-600"> {{ profile.user.email }} </p>
            {% endif %}


            {% if profile.bio %}
            	<p class="text-sm italic text-pink-500">{{ profile.bio }} </p>
            {% endif %}


            <div class="mt-2 space-y-1">
                <p class="text-sm text-pink-600"><strong>Age:</strong> {{ profile.age|default:'-' }} </p>
                <p class="text-sm text-pink-600"><strong>Location:</strong> {{ profile.location|default:'-' }}</p>
                <p class="text-sm text-pink-600"><strong>Skin type:</strong> {{ profile.skin_type|default:'-' }} </p>
            </div>

        </section>

        <!-- Middle Column -->
        <section class="col-span-1 space-y-6 bg-pink-100 p-4 rounded-xl">
            <div class="fav-events-container">
                <h3 class="text-lg font-semibold text-pink-600 mb-1">Fav Events</h3>
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1 max-h-40 overflow-y-auto">
                    {% for event in fav_events %}
                        <li class="hover:underline hover:text-pink-600 cursor-pointer">
                            <a href="{% url 'event-details' event.pk %}">
                                {{ event.title }}
                            </a>
                        </li>
                        {% empty %}
                        <li class="text-gray-700 italic">No fav events yet.</li>
                    {% endfor %}
                </ul>
            </div>
            <div class="fav-posts-container">
                <h3 class="text-lg font-semibold text-pink-600 mb-1">Fav Posts</h3>
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1 max-h-40 overflow-y-auto">
                    {% for post in fav_posts %}
                        <li class="hover:underline hover:text-pink-600 cursor-pointer">
                            <a href="{% url 'post-details' post.pk %}">
                                {{ post.title }}
                            </a>
                        </li>
                     {% empty %}
                        <li class="text-gray-700 italic">No fav posts yet.</li>
                    {% endfor %}
                </ul>
            </div>
            <div class="fav-challenges-container">
                <h3 class="text-lg font-semibold text-pink-600 mb-1">Fav Challenges</h3>
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1 max-h-40 overflow-y-auto">
                    {% for challenge in fav_challenges %}
                        <li class="hover:underline hover:text-pink-600 cursor-pointer">
                            <a href="{% url 'challenge-details' challenge.pk %}">
                                {{ challenge.title }}
                            </a>
                        </li>
                        {% empty %}
                        <li class="text-gray-700 italic">No fav events yet.</li>
                    {% endfor %}
                </ul>
            </div>
             <div class="fav-events-container">
                <h3 class="text-lg font-semibold text-pink-600 mb-1">{{ profile.user.username }}'s Posts</h3>
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1 max-h-40 overflow-y-auto">
                    {% for post in my_posts %}
                        <li class="hover:underline hover:text-pink-600 cursor-pointer">
                            <a href="{% url 'post-details' post.pk %}">
                                {{ post.title }}
                            </a>
                        </li>
                    {% empty %}
                        <li class="text-gray-700 italic">No posts yet.</li>
                    {% endfor %}
                </ul>
            </div>

        </section>

        <!-- Right Column -->
        <section class="col-span-1 space-y-6 bg-pink-100 p-4 rounded-xl">
            <div class="fav-events-container">
                <h3 class="text-lg font-semibold text-pink-600 mb-1">Joined Events</h3>
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1 max-h-40 overflow-y-auto">
                    {% for event in joined_events %}
                        <li class="hover:underline hover:text-pink-600 cursor-pointer">
                            <a href="{% url 'event-details' event.pk %}">
                                {{ event.title }}
                            </a>
                        </li>
                    {% empty %}
                        <li class="text-gray-700 italic">No joined events yet.</li>
                    {% endfor %}
                </ul>
            </div>

             <div class="fav-events-container">
                <h3 class="text-lg font-semibold text-pink-600 mb-1">Joined Challenges</h3>
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1 max-h-40 overflow-y-auto">
                    {% for challenge in joined_challenges %}
                        <li class="hover:underline hover:text-pink-600 cursor-pointer">
                            <a href="{% url 'challenge-details' challenge.pk %}">
                                {{ challenge.title }}
                            </a>
                        </li>
                    {% empty %}
                        <li class="text-gray-700 italic">No joined challenges yet.</li>
                    {% endfor %}
                </ul>
            </div>
             <div class="fav-events-container">
                <h3 class="text-lg font-semibold text-pink-600 mb-1">{{ profile.user.username }}'s Challenges</h3>
                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1 max-h-40 overflow-y-auto">
                    {% for challenge in challenges %}
                        <li class="hover:underline hover:text-pink-600 cursor-pointer">
                            <a href="{% url 'challenge-details' challenge.pk %}">
                                {{ challenge.title }}
                            </a>
                        </li>
                    {% empty %}
                        <li class="text-gray-700 italic">No challenges yet.</li>
                    {% endfor %}
                </ul>
            </div>
        </section>
    </div>
</section>


{% endblock %}



