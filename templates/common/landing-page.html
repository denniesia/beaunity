{% extends 'common/base.html' %}
{% load static %}
{% block content %}
<!-- Hero Section -->
<section class="relative flex flex-col justify-center overflow-hidden ">
    <!-- ðŸŒ¸ Background Video -->

    <img src="{% static 'common/bg-pic6.png' %}" class="absolute inset-0 w-full h-full object-cover ">
    <!-- âœ¨ Foreground Content -->
    <section class="flex-grow flex items-center  py-10 relative z-10">
        <div class="max-w-screen-xl px-4 mx-auto lg:py-16 grid lg:grid-cols-12 gap-4 items-center">
            <!-- ðŸ“ Left Text Content -->
            <div class="lg:col-span-7 flex flex-col align-center justify-center">
                <h1 class="max-w-2xl mb-4 text-4xl font-normal tracking-tight text-pink-500 d:text-5xl">
                    Welcome to your glow-up journey âœ¨
                </h1>
                <p class="max-w-2xl mb-4 font-light lg:mb-6 md:text-lg lg:text-xl">
                    Join a vibrant skincare community where real routines, trusted products, and personal glow-ups come to life.
                </p>
                <div class="flex flex-wrap gap-4">
                    <a href="#" class="inline-flex items-center justify-center px-5 py-3 text-base font-medium text-white rounded-lg bg-pink-500 hover:bg-pink-600 focus:ring-4 focus:ring-pink-300">
                        Join the Forum
                        <svg class="w-5 h-5 ml-2 -mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                        </svg>
                    </a>
                    <a href="#" class="inline-flex items-center justify-center px-5 py-3 text-base font-medium text-pink-700 border border-pink-300 rounded-lg hover:bg-pink-200 focus:ring-4 focus:ring-pink-300">
                        Learn More
                    </a>
                </div>
            </div>
            <div class="lg:col-span-5 flex items-center">
                <div class="w-full h-auto overflow-hidden rounded-md shadow-xl sm:rounded-xl opacity-90">
                    <img class="w-full object-cover" src="{% static 'common/bg-pic2.jpg' %}" alt="Skincare image">
                </div>
            </div>
        </div>
    </section>
</section>
    <section class="py-4 bg-pink-50 overflow-hidden">
        <div class="max-w-full mx-auto px-4">
            <h2 class="text-2xl font-bold text-pink-500 text-center mt-2">Explore Categories</h2>
            <div id="scroll-wrapper" class="relative overflow-x-auto whitespace-nowrap py-8 min-h-[100px]">
                <div id="scroll-content" class="flex gap-6">
                    {% for category in categories %}
                        <div class="min-w-[200px] bg-white rounded-xl shadow text-center p-4 flex-shrink-0 transition-all duration-300 transform cursor-pointer hover:scale-105 hover:shadow-pink-400 hover:shadow-lg">
                            <a href="{% url 'category-details' category.slug %}">
                                <img src="{{ category.image.url }}" class="object-cover mx-auto rounded-lg">
                                <h3 class="text-xl font-semibold text-pink-600">{{ category.title }}</h3>
                                <p class="text-sm text-gray-600">{{ category.description }}</p>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="flex justify-end">
                <a href="{% url 'forum-dashboard' %}" class="text-pink-600 font-medium hover:underline flex items-center gap-1">
                    See all
                    <svg class="w-8 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                </a>
            </div>
        </div>
        <section class="w-[1200px] mx-auto py-8 border-4 border-pink-200 mt-4 rounded-xl overflow-hidden">
            <div class="max-w-3xl mx-auto px-6 grid grid-cols-1 md:grid-cols-2 gap-12 relative z-10">
                <!-- ðŸ’¬ Text Content -->
                <div class="text-center md:text-left">
                    <h2 class="mb-4 text-3xl font-bold text-pink-700 sm:text-3xl">
                        Join Our Community
                    </h2>
                    <p class="mb-4 text-lg text-pink-600 max-w-xl">
                        Connect with others who share your passion for skincare and wellness. Together we grow, glow, and support each other's journeys.
                    </p>
                    <div class="flex justify-center md:justify-start">
                        <a href="{% url 'register' %}" class="rounded-lg bg-pink-600 px-8 py-3 text-lg font-semibold text-white shadow-lg hover:bg-pink-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-600 transition-colors">
                            Sign Up Today
                        </a>
                    </div>
                </div>
                <!-- ðŸŒ¸ Centered animation on the right -->
                <div class="flex justify-center items-center">
                    <div id="community-animation" class="w-70 h-70"></div>
                </div>
            </div>
        </section>
        <div class="max-w-full mx-auto px-4">
            <h2 class="text-2xl font-bold text-pink-500 text-center mt-4">Explore Events</h2>
            <div class="relative overflow-x-auto py-8 pl-8">
                <div class="flex justify-center gap-6 pl-8">
                    {% for event in events %}
                        <div class="w-full sm:w-80 md:w-96 lg:w-100 bg-white relative rounded-2xl shadow text-left flex-shrink-0 transition-all duration-300 transform cursor-pointer hover:scale-105 hover:shadow-pink-400 hover:shadow-lg">
                            <a href="{% url 'event-details' event.pk %}" >
                                {% if event.created_by == user %}
                                    <div class="absolute top-1 right-2 text-pink-600 text-xs font-semibold px-5 py-2 rounded-full shadow-md z-10" style=" background-color: white">
                                        Your Event
                                    </div>
                                {% endif %}
                                <img src="{{ event.poster_image.url }}" alt="Event Image" class="w-full h-40 object-cover rounded-t-2xl">
                                <div class="p-4">
                                    <h3 class="text-lg font-semibold text-pink-600">{{ event.title }}</h3>
                                    <p class="text-xs text-gray-500 mb-3">
                                        Hosted by
                                        <a href="{% url 'profile-details' event.created_by.id %}"><strong>@{{ event.created_by }}</strong>
                                        </a>
                                    <p class="text-sm text-gray-600 mb-2">{{ event.details|truncatechars:90 }}</p>
                                    <p class="text-sm text-gray-500">{{ event.start_time|date:"F j, Y, H:i" }}</p>
                                    <div class="flex">
                                        <p class="text-sm text-gray-500 mt-4">
                                            Going:
                                        </p>
                                        {% if user.is_authenticated%}
                                            {% if event.attendees %}
                                                <div class="flex flex-wrap gap-2 mt-2 ml-2">
                                                    {% for attendee in event.attendees.all %}
                                                        <a href="{% url 'profile-details' attendee.profile.pk %}"><img src="{{ attendee.profile.profile_pic.url|default:'https://i.pinimg.com/474x/9d/86/8e/9d868edb99fa442461138e2f9a1e0be1.jpg' }}" class="w-10 h-10 rounded-full object-cover border border-pink-300"></a>
                                                    {% empty %}
                                                        <p class="text-sm text-gray-500">No attendees yet.</p>
                                                    {% endfor %}
                                                </div>
                                            {% endif %}
                                         {% else %}
                                            <p class="text-sm text-gray-500 italic mt-4 ml-2">Login to see who is going.</p>
                                        {% endif %}
                                    </div>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                    <div class="flex mr-10 ">
                        <a href="{% url 'events' %}" class="text-pink-600 font-medium hover:underline  flex items-center gap-1">
                            See all
                            <svg class="w-8 h-6" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>






        <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.9.6/lottie.min.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const scrollWrapper = document.getElementById("scroll-wrapper");

                let scrollAmount = 0;
                const speed = 0.5; // pixels per frame

                function autoScroll() {
                    scrollAmount += speed;
                    scrollWrapper.scrollLeft = scrollAmount;
                    // Reset when reaching the end
                    if (scrollAmount >= scrollWrapper.scrollWidth - scrollWrapper.clientWidth) {
                        scrollAmount = 0;
                    }

                    requestAnimationFrame(autoScroll);
                }

                autoScroll();
            });
            lottie.loadAnimation({
                container: document.getElementById('community-animation'), // the div container
                renderer: 'svg',
                loop: true,
                autoplay: true,
                path: "{% static 'common/community-animation.json' %}"
            });
        </script>
        <style>
            #scroll-wrapper {
                scrollbar-width: none; /* Firefox */
                -ms-overflow-style: none;  /* Internet Explorer 10+ */
            }
            #scroll-wrapper::-webkit-scrollbar {
                display: none; /* Safari and Chrome */
            }
        </style>
    </section>
{% endblock %}